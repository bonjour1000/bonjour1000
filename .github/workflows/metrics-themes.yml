name: Metrics with Themes (Thèmes personnalisés)

on:
  # Exécution manuelle uniquement pour tester différents thèmes
  workflow_dispatch:
    inputs:
      theme:
        description: 'Choisir un thème'
        required: true
        default: 'dark'
        type: choice
        options:
          - dark
          - terminal
          - compact
          - colorful

jobs:
  # ==========================================
  # THÈME SOMBRE (Dark Mode)
  # ==========================================
  metrics-dark:
    if: github.event.inputs.theme == 'dark'
    runs-on: ubuntu-latest
    permissions:
      contents: write
    steps:
      - uses: lowlighter/metrics@latest
        with:
          token: ${{ secrets.METRICS_TOKEN }}
          user: ${{ github.repository_owner }}
          template: classic
          base: header, activity, community, repositories
          config_timezone: Europe/Paris
          filename: github-metrics-dark.svg
          
          # Thème sombre avec CSS personnalisé
          config_display: large
          config_padding: 6%, 10%
          
          extras_css: |
            * {
              color: #e4e4e4 !important;
              fill: #e4e4e4 !important;
            }
            .field svg {
              fill: #8b949e !important;
            }
            h2 {
              color: #58a6ff !important;
            }
            svg {
              background: #0d1117 !important;
            }
          
          plugin_isocalendar: yes
          plugin_languages: yes
          plugin_languages_indepth: yes
          plugin_habits: yes
          
  # ==========================================
  # THÈME TERMINAL (Style console)
  # ==========================================
  metrics-terminal:
    if: github.event.inputs.theme == 'terminal'
    runs-on: ubuntu-latest
    permissions:
      contents: write
    steps:
      - uses: lowlighter/metrics@latest
        with:
          token: ${{ secrets.METRICS_TOKEN }}
          user: ${{ github.repository_owner }}
          template: terminal
          base: header, activity, community, repositories
          config_timezone: Europe/Paris
          filename: github-metrics-terminal.svg
          
          plugin_isocalendar: yes
          plugin_languages: yes
          plugin_habits: yes
          
  # ==========================================
  # MÉTRIQUES COMPACTES (version minimaliste)
  # ==========================================
  metrics-compact:
    if: github.event.inputs.theme == 'compact'
    runs-on: ubuntu-latest
    permissions:
      contents: write
    steps:
      - uses: lowlighter/metrics@latest
        with:
          token: ${{ secrets.METRICS_TOKEN }}
          user: ${{ github.repository_owner }}
          template: classic
          base: header, repositories
          config_timezone: Europe/Paris
          filename: github-metrics-compact.svg
          config_padding: 0, 10%
          
          # Version minimale et rapide
          plugin_languages: yes
          plugin_languages_limit: 4
          plugin_languages_sections: most-used
          
  # ==========================================
  # MÉTRIQUES COLORÉES (Arc-en-ciel)
  # ==========================================
  metrics-colorful:
    if: github.event.inputs.theme == 'colorful'
    runs-on: ubuntu-latest
    permissions:
      contents: write
    steps:
      - uses: lowlighter/metrics@latest
        with:
          token: ${{ secrets.METRICS_TOKEN }}
          user: ${{ github.repository_owner }}
          template: classic
          base: header, activity, community, repositories
          config_timezone: Europe/Paris
          filename: github-metrics-colorful.svg
          
          # Couleurs vives
          plugin_isocalendar: yes
          plugin_isocalendar_duration: full-year
          
          plugin_languages: yes
          plugin_languages_indepth: yes
          plugin_languages_colors: rainbow
          
          plugin_habits: yes
          plugin_habits_charts: yes
          plugin_habits_charts_type: chartist
          
          extras_css: |
            h1, h2 {
              background: linear-gradient(90deg, #ff6b6b, #4ecdc4, #45b7d1, #f9ca24);
              -webkit-background-clip: text;
              -webkit-text-fill-color: transparent;
              animation: gradient 3s ease infinite;
            }
            @keyframes gradient {
              0%, 100% { filter: hue-rotate(0deg); }
              50% { filter: hue-rotate(360deg); }
            }
