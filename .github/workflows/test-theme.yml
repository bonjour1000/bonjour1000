name: Test Theme (Un thème à la fois)

on:
  workflow_dispatch:
    inputs:
      theme:
        description: 'Choisir un thème à tester'
        required: true
        default: 'dark'
        type: choice
        options:
          - dark
          - terminal
          - compact
          - colorful

jobs:
  test-theme:
    runs-on: ubuntu-latest
    environment: 
      name: production
    permissions:
      contents: write
    steps:
      # THÈME DARK
      - name: Generate Dark Theme
        if: github.event.inputs.theme == 'dark'
        uses: lowlighter/metrics@latest
        with:
          token: ${{ secrets.METRICS_TOKEN }}
          user: bonjour1000
          template: classic
          base: header, activity, community, repositories
          config_timezone: Europe/Paris
          config_padding: 6%, 10%
          filename: github-metrics-dark.svg
          
          # Style sombre
          extras_css: |
            * {
              color: #e4e4e4 !important;
              fill: #e4e4e4 !important;
            }
            .field svg {
              fill: #8b949e !important;
            }
            h2 {
              color: #58a6ff !important;
            }
            svg {
              background: #0d1117 !important;
            }
          
          plugin_isocalendar: yes
          plugin_languages: yes
          plugin_languages_indepth: yes
          plugin_habits: yes
      
      # THÈME TERMINAL
      - name: Generate Terminal Theme
        if: github.event.inputs.theme == 'terminal'
        uses: lowlighter/metrics@latest
        with:
          token: ${{ secrets.METRICS_TOKEN }}
          user: bonjour1000
          template: terminal
          base: header, activity, community, repositories
          config_timezone: Europe/Paris
          filename: github-metrics-terminal.svg
          
          plugin_isocalendar: yes
          plugin_languages: yes
          plugin_habits: yes
      
      # THÈME COMPACT
      - name: Generate Compact Theme
        if: github.event.inputs.theme == 'compact'
        uses: lowlighter/metrics@latest
        with:
          token: ${{ secrets.METRICS_TOKEN }}
          user: bonjour1000
          template: classic
          base: header, repositories
          config_timezone: Europe/Paris
          config_padding: 0, 10%
          filename: github-metrics-compact.svg
          
          plugin_languages: yes
          plugin_languages_limit: 4
          plugin_languages_sections: most-used
      
      # THÈME COLORFUL
      - name: Generate Colorful Theme
        if: github.event.inputs.theme == 'colorful'
        uses: lowlighter/metrics@latest
        with:
          token: ${{ secrets.METRICS_TOKEN }}
          user: bonjour1000
          template: classic
          base: header, activity, community, repositories
          config_timezone: Europe/Paris
          filename: github-metrics-colorful.svg
          
          plugin_isocalendar: yes
          plugin_languages: yes
          plugin_languages_colors: rainbow
          plugin_habits: yes
          
          extras_css: |
            h1, h2 {
              background: linear-gradient(90deg, #ff6b6b, #4ecdc4, #45b7d1, #f9ca24);
              -webkit-background-clip: text;
              -webkit-text-fill-color: transparent;
            }

